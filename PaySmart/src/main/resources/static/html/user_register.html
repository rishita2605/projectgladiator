<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Page Title</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
<script src="//geodata.solutions/includes/countrystatecity.js"></script>
<link href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/lux/bootstrap.min.css" rel="stylesheet" integrity="sha384-hVpXlpdRmJ+uXGwD5W6HZMnR9ENcKVRn855pPbuI/mwPIEKAuKgTKgGksVGmlAvt" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" media="screen" href="../css/register.css" />
<script type="text/javascript">
$(document).ready(function(){
	if (sessionStorage.getItem('customer_username') === null) {
		  //...
		}
	else{
		window.location.replace("../index.html");
	}
})
$(function() {
	$("#addUser").submit(function(evt) {
		evt.preventDefault();
		
		formdata = new FormData();
		
		formdata.append("fname",$("#u_fname").val());
		formdata.append("lname",$("#u_lname").val());
		formdata.append("email",$("#u_email").val());
		formdata.append("phone_no",$("#u_phone_no").val());
		formdata.append("dob",$("#u_dob").val());
		
		formdata.append("username",$("#u_username").val());
		formdata.append("password",$("#u_password").val());
		
		formdata.append("bankname",$("#u_bank_name").val());
		formdata.append("acc_no", $("#u_ac_no").val());
		formdata.append("ifsc_code", $("#u_ifsc").val());
		
		formdata.append("cardtype",$('input[name=cardtype]:checked').val());
		
		formdata.append("city",$("#cityId").val());
		formdata.append("doorno",$("#u_door_no").val());
		formdata.append("street",$("#u_street").val());
		formdata.append("pincode",$("#u_pincode").val());
		formdata.append("state",$("#stateId").val());
		formdata.append("country", $("#countryId").val());
		
		formdata.append("aadharcard", $("#u_aadhar").get(0).files[0]);
		formdata.append("pancard", $("#u_pan").get(0).files[0]);
		
 		$.ajax({
 			url : "/register.user",
 			method : 'POST', 
 			data : formdata,
 			processData : false,
 			contentType : false,
 			success: function(response){
 				if(response === "Success") {
					location.href = "../index.html";	
				}
 			}
 		})
	})
})
</script>
</head>
<body>  
	<div class="register">
	<h2 align="center">REGISTRATION PAGE</h2>
		<form id="addUser" method="post">
			<button class="accordion" type="button">Basic Details</button>
			<div class="panel">
				<label>FIRSTNAME</label>
				<input type="text" class="form-control" placeholder="Enter you first name" id="u_fname" required>
				<label>LASTNAME</label>
				<input type="text" class="form-control" placeholder="Enter your last name" id="u_lname" required>
				<label>DATE</label>
				<input type="date" class="form-control select-date" id="u_dob" required>
				<label>EMAIL</label>
				<input type="email" class="form-control" placeholder="Enter your email" id="u_email" required>
				<label>PHONENO.</label>
				<input type="number" class="form-control" placeholder="Enter your phone number" id="u_phone_no" required>
			</div>
			<button class="accordion" type="button">Credentials</button>
			<div class="panel">
				<label>USERNAME</label>
				<input type="text" class="form-control" placeholder="Enter your username" id="u_username" required>
				<label>PASSWORD</label>
				<input type="password" class="form-control" placeholder="Enter your password" id="u_password" required>
			</div>
			<button class="accordion" type="button">Address</button>
			<div class="panel">
				<label>HOUSENO</label>
				<input type="text" class="form-control" placeholder="Enter your door no" id="u_door_no" required>
				<label>STREET</label>
				<input type="text" class="form-control" placeholder="Enter your street" id="u_street" required>
				<label>COUNTRY</label>
				<select name="country" class="countries" id="countryId" required>
				    <option value="">Select Country</option>
				</select>
				<label>STATE</label>
				<select name="state" class="states" id="stateId" required>
				    <option value="">Select State</option>
				</select>
				<label>CITY</label>
				<select name="city" class="cities" id="cityId" required>
				    <option value="">Select City</option>
				</select>
				<label>PINCODE</label>
				<input type="number" class="form-control" placeholder="Enter your pincode" id="u_pincode" required>
			</div>
			<button class="accordion" type="button">Document Upload</button>
			<div class="panel">
			<label>AADHAR CARD</label>
			<input type="file" class="form-control" placeholder="" id="u_aadhar" required>
			<label>PAN CARD</label>
			<input type="file" class="form-control" placeholder="" id="u_pan" required>
			</div>
			<button class="accordion" type="button">CARD TYPE</button>
			<div class="panel">
			<input type="radio" name="cardtype"  value="GOLD"/ required>Gold 
			<input type="radio" name="cardtype" value="TITANIUM"/>Titanium <br/>
			</div>
			<button class="accordion" type="button">BANK DETAILS</button>
			<div class="panel">
			<label>BANK NAME</label>
			<input type="text" class="form-control" placeholder="Enter your bank name" id="u_bank_name" required>
			<label>SAVINGS A/C NO</label>
			<input type="text" class="form-control" placeholder="Enter your a/c no" id="u_ac_no" required>
			<label>IFSC CODE</label>
			<input type="text" class="form-control " placeholder="Enter your ifsc code" id="u_ifsc" required> 
			</div>
			<div class="submit">
			<input type="submit" value="Register" /> <br/>
			</div>
		</form>
	</div>
<br/>

<div class="help">
Already Registered Member? <a href="../html/user_login.html" style="color:blue">Login here</a>
</div>
<script>
	var acc = document.getElementsByClassName("accordion");
	var i;
	for (i = 0; i < acc.length; i++) {
	  acc[i].addEventListener("click", function() {
	    this.classList.toggle("active");
	    var panel = this.nextElementSibling;
	    if (panel.style.display === "block") {
	      panel.style.display = "none";
	    } else {
	      panel.style.display = "block";
	    }
	  });
	}
</script>
</body>
</html>