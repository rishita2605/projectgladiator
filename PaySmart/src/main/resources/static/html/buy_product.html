<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Buy Product</title>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script>
$(document).ready(function(){
	var product_id = sessionStorage.getItem("clicked_item");
	var url = "/view.specific.product?product_id="+product_id
	
	$.ajax({
		url : url,
		method : 'GET',
		type : 'json',
		
		success : function(response){
			alert(JSON.stringify(response));
			var r = $('<button class="buyproduct" value='+response.product_id+'>Validate</button>')
			$("p").append(r);
		}
		
	})
	$(document).on("click","button.buyproduct",function(){
		
		var obj = {
			user_name : sessionStorage.getItem("customer_username"),
			product_id : product_id,
			emi_scheme : $( "#customer_choice" ).val()
		}
		
		alert(JSON.stringify(obj));
		
		$.ajax({
			url : '/place.product.order',
			method : 'POST',
			type : 'json',
			data : JSON.stringify(obj),
			contentType : 'application/json',
			
			success : function(response){
				alert(JSON.stringify(response));
			}
		})
	})
})

</script>

</head>
<body>
TO DO: Add the parts where the data is getting appended.


<div>
<select name="EMI Schemes" id="customer_choice">
  <option value="THREEMONTHS">THREEMONTHS</option>
  <option value="SIXMONTHS">SIXMONTHS</option>
  <option value="NINEMONTHS">NINEMONTHS</option>
  <option value="TWELVEMONTHS">TWELVEMONTHS</option>
</select>
</div>
<p>
</p>
</body>
</html>